{
  "_description": "ACOS v6.1 Enhanced Skill Rules - Confidence scoring, enforcement types, skip conditions",
  "_version": "6.1.0",
  "_sources": [
    "diet103/claude-code-infrastructure-showcase - enforcement types, skip conditions",
    "claude-flow - model routing integration",
    "wshobson/agents - three-tier model strategy"
  ],
  "_updated": "2026-01-28",

  "scoring_weights": {
    "keyword": 2,
    "keywordPattern": 3,
    "pathPattern": 4,
    "directoryMatch": 5,
    "intentPattern": 4,
    "contentPattern": 5,
    "commandTrigger": 6
  },

  "activation_config": {
    "max_concurrent_skills": 3,
    "priority_order": ["critical", "high", "medium", "low"],
    "confidence_threshold": 4,
    "auto_load_brand_skill": true,
    "brand_skill": "frankx-brand",
    "always_active": ["cacos", "planning-with-files", "model-routing"]
  },

  "model_routing": {
    "default": "sonnet",
    "haiku_commands": ["/mcp-status", "/inventory-status", "/nextjs-deploy", "/publish"],
    "sonnet_commands": ["/article-creator", "/create-music", "/spec", "/generate-social", "/infogenius", "/factory", "/polish-content", "/review-content"],
    "opus_commands": ["/starlight-architect", "/council", "/author-team", "/research", "/plan-week"]
  },

  "skills": {
    "model-routing": {
      "type": "system",
      "enforcement": "always",
      "priority": "critical",
      "model": "inherit",
      "description": "Intelligent Haiku/Sonnet/Opus routing based on task complexity",
      "promptTriggers": {
        "keywords": ["model", "routing", "cost", "optimize", "haiku", "sonnet", "opus"],
        "intentPatterns": ["(which|what).*model", "(optimize|reduce).*cost", "use.*haiku"]
      },
      "skipConditions": {
        "sessionSkillUsed": false,
        "envOverride": "SKIP_MODEL_ROUTING"
      }
    },

    "suno-ai-mastery": {
      "type": "domain",
      "enforcement": "suggest",
      "priority": "high",
      "model": "sonnet",
      "description": "Advanced Suno AI prompt engineering for music production",
      "promptTriggers": {
        "keywords": ["music", "suno", "track", "song", "lyrics", "melody", "beat", "frequency", "hz", "audio"],
        "intentPatterns": ["(create|make|produce|write).*(music|song|track)", "(generate|craft).*lyrics"]
      },
      "fileTriggers": {
        "pathPatterns": ["*.mp3", "*.wav", "music/**", "audio/**"],
        "pathExclusions": ["node_modules/**"]
      },
      "commandTriggers": ["/create-music"],
      "skipConditions": {
        "sessionSkillUsed": true,
        "fileMarkers": ["@skip-music-skill"]
      }
    },

    "content-strategy": {
      "type": "domain",
      "enforcement": "suggest",
      "priority": "high",
      "model": "sonnet",
      "description": "Content planning, SEO optimization, and publishing strategy",
      "promptTriggers": {
        "keywords": ["blog", "article", "content", "post", "newsletter", "SEO", "publish", "write"],
        "intentPatterns": ["(write|create|draft).*(blog|article|post)", "(plan|strategy).*content"]
      },
      "fileTriggers": {
        "pathPatterns": ["*.mdx", "*.md", "content/**", "blog/**", "articles/**"],
        "contentPatterns": ["frontmatter", "## ", "### "],
        "pathExclusions": ["node_modules/**", "*.config.*"]
      },
      "commandTriggers": ["/article-creator", "/factory", "/publish"],
      "skipConditions": {
        "sessionSkillUsed": true,
        "fileMarkers": ["@skip-content-skill"]
      }
    },

    "starlight-architecture": {
      "type": "domain",
      "enforcement": "warn",
      "priority": "critical",
      "model": "opus",
      "description": "Enterprise AI system design, Oracle architecture, multi-agent orchestration",
      "promptTriggers": {
        "keywords": ["architect", "enterprise", "system design", "oracle", "infrastructure", "multi-agent"],
        "intentPatterns": ["(design|architect|plan).*(system|architecture|infrastructure)", "enterprise.*AI"]
      },
      "fileTriggers": {
        "pathPatterns": ["architecture/**", "*.tf", "terraform/**", "infrastructure/**"],
        "contentPatterns": ["microservice", "kubernetes", "docker-compose"]
      },
      "commandTriggers": ["/starlight-architect"],
      "warnMessage": "Complex architecture task detected. Consider using Opus model for best results.",
      "skipConditions": {
        "sessionSkillUsed": false,
        "envOverride": "SKIP_ARCHITECTURE_SKILL"
      }
    },

    "council-deliberation": {
      "type": "domain",
      "enforcement": "suggest",
      "priority": "critical",
      "model": "opus",
      "description": "Multi-agent council for strategic decisions with diverse perspectives",
      "promptTriggers": {
        "keywords": ["council", "deliberate", "perspectives", "should I", "decision", "strategy"],
        "intentPatterns": ["(should|what|how).*(I|we).*(do|choose|decide)", "multiple.*perspectives"]
      },
      "commandTriggers": ["/council"],
      "skipConditions": {
        "sessionSkillUsed": false
      }
    },

    "nextjs-react-expert": {
      "type": "domain",
      "enforcement": "suggest",
      "priority": "high",
      "model": "sonnet",
      "description": "Next.js 15+, React 19, App Router, Server Components expertise",
      "promptTriggers": {
        "keywords": ["nextjs", "react", "component", "page", "route", "server component", "app router"],
        "intentPatterns": ["(create|build|implement).*(component|page|route)", "next.*js"]
      },
      "fileTriggers": {
        "pathPatterns": ["app/**/*.tsx", "components/**/*.tsx", "next.config.*", "src/**/*.tsx"],
        "contentPatterns": ["'use client'", "'use server'", "export default function", "import.*from 'next"]
      },
      "commandTriggers": ["/nextjs-deploy", "/spec"],
      "skipConditions": {
        "sessionSkillUsed": true,
        "fileMarkers": ["@skip-nextjs-skill"]
      }
    },

    "mcp-architecture": {
      "type": "domain",
      "enforcement": "suggest",
      "priority": "medium",
      "model": "sonnet",
      "description": "Model Context Protocol server design and implementation",
      "promptTriggers": {
        "keywords": ["MCP", "model context protocol", "server", "tool integration", "mcp server"],
        "intentPatterns": ["(create|build|implement).*MCP", "model.*context.*protocol"]
      },
      "fileTriggers": {
        "pathPatterns": ["mcp-servers/**", "*.mcp.*", "servers/**"],
        "contentPatterns": ["@modelcontextprotocol", "McpServer", "tool("]
      },
      "commandTriggers": ["/mcp-status", "/automation-dev"],
      "skipConditions": {
        "sessionSkillUsed": true
      }
    },

    "spec-driven-development": {
      "type": "workflow",
      "enforcement": "suggest",
      "priority": "high",
      "model": "sonnet",
      "description": "Requirements → Design → Tasks → Implementation workflow",
      "promptTriggers": {
        "keywords": ["spec", "requirements", "design doc", "implementation plan", "feature"],
        "intentPatterns": ["(implement|build|create).*feature", "(plan|design).*implementation"]
      },
      "commandTriggers": ["/spec"],
      "skipConditions": {
        "sessionSkillUsed": true,
        "fileMarkers": ["@skip-spec-workflow"]
      }
    },

    "planning-with-files": {
      "type": "workflow",
      "enforcement": "suggest",
      "priority": "high",
      "model": "sonnet",
      "description": "Manus-style file-based planning with task_plan.md, findings.md, progress.md",
      "promptTriggers": {
        "keywords": ["plan", "task", "breakdown", "implement", "complex task", "multi-step"],
        "intentPatterns": ["(plan|break.*down|organize).*task", "complex.*implementation"]
      },
      "fileTriggers": {
        "pathPatterns": ["task_plan.md", "findings.md", "progress.md", "*.plan.md"]
      },
      "commandTriggers": ["/planning-with-files", "/spec"],
      "skipConditions": {
        "sessionSkillUsed": false
      }
    },

    "social-media-strategy": {
      "type": "domain",
      "enforcement": "suggest",
      "priority": "medium",
      "model": "sonnet",
      "description": "Platform-optimized social content for LinkedIn, Twitter, Instagram",
      "promptTriggers": {
        "keywords": ["social", "linkedin", "twitter", "instagram", "farcaster", "thread", "post"],
        "intentPatterns": ["(create|write|generate).*social", "(post|share).*linkedin"]
      },
      "fileTriggers": {
        "pathPatterns": ["social/**", "templates/social-media/**", "public/social/**"]
      },
      "commandTriggers": ["/generate-social"],
      "skipConditions": {
        "sessionSkillUsed": true
      }
    },

    "excellence-book-writing": {
      "type": "domain",
      "enforcement": "suggest",
      "priority": "medium",
      "model": "opus",
      "description": "Book writing with author team - narrative, character, world-building",
      "promptTriggers": {
        "keywords": ["book", "chapter", "manuscript", "novel", "writing", "narrative", "character"],
        "intentPatterns": ["(write|create|draft).*(book|chapter|novel)", "character.*development"]
      },
      "fileTriggers": {
        "pathPatterns": ["manuscripts/**", "chapters/**", "books/**"]
      },
      "commandTriggers": ["/author-team"],
      "skipConditions": {
        "sessionSkillUsed": true
      }
    },

    "security-auditor": {
      "type": "guardrail",
      "enforcement": "warn",
      "priority": "critical",
      "model": "sonnet",
      "description": "Security vulnerability detection, OWASP compliance, credential protection",
      "promptTriggers": {
        "keywords": ["security", "vulnerability", "OWASP", "audit", "penetration", "CVE", "credential"],
        "intentPatterns": ["(check|scan|audit).*security", "(find|detect).*vulnerabilit"]
      },
      "fileTriggers": {
        "pathPatterns": [".env*", "auth/**", "security/**", "credentials/**"],
        "contentPatterns": ["password", "secret", "api_key", "token", "credential"]
      },
      "warnMessage": "Security-sensitive content detected. Activating security-auditor skill.",
      "skipConditions": {
        "sessionSkillUsed": false,
        "envOverride": "SKIP_SECURITY_AUDIT"
      }
    },

    "agentic-orchestration": {
      "type": "domain",
      "enforcement": "suggest",
      "priority": "high",
      "model": "opus",
      "description": "Multi-agent coordination, swarm patterns, consensus mechanisms",
      "promptTriggers": {
        "keywords": ["swarm", "multi-agent", "orchestrate", "coordinate", "parallel agents", "ultrawork", "consensus"],
        "intentPatterns": ["(coordinate|orchestrate).*agent", "multi.*agent", "parallel.*execution"]
      },
      "fileTriggers": {
        "pathPatterns": ["workflows/**", "departments/**", "agents/**"]
      },
      "commandTriggers": ["/council", "/starlight-intelligence"],
      "skipConditions": {
        "sessionSkillUsed": true
      }
    },

    "ui-ux-design-expert": {
      "type": "domain",
      "enforcement": "suggest",
      "priority": "medium",
      "model": "sonnet",
      "description": "Interface design, accessibility, design systems, Figma patterns",
      "promptTriggers": {
        "keywords": ["design", "UX", "UI", "interface", "component", "layout", "responsive", "accessibility"],
        "intentPatterns": ["(design|create|improve).*interface", "(UX|UI).*pattern"]
      },
      "fileTriggers": {
        "pathPatterns": ["*.tsx", "*.css", "components/**", "styles/**", "design/**"],
        "contentPatterns": ["className=", "tailwind", "styled-components"]
      },
      "commandTriggers": ["/ux-design"],
      "skipConditions": {
        "sessionSkillUsed": true
      }
    },

    "cacos": {
      "type": "system",
      "enforcement": "always",
      "priority": "critical",
      "model": "sonnet",
      "description": "Claude Agentic Creator OS - core system activation",
      "promptTriggers": {
        "keywords": ["cacos", "agentic creator os", "activate system", "ultrawork", "ulw", "acos"],
        "intentPatterns": ["activate.*system", "start.*acos"]
      },
      "commandTriggers": ["/acos"],
      "skipConditions": {
        "sessionSkillUsed": false
      }
    }
  },

  "conflict_resolution": {
    "strategy": "priority_then_confidence",
    "description": "When multiple skills match, group by priority level, then rank by confidence score within each group",
    "max_suggestions_per_priority": 2,
    "display_format": {
      "critical": "CRITICAL",
      "high": "RECOMMENDED",
      "medium": "SUGGESTED",
      "low": "OPTIONAL"
    }
  },

  "enforcement_messages": {
    "always": "This skill is always active and cannot be skipped.",
    "block": "BLOCKED - You must activate this skill before proceeding.",
    "warn": "WARNING - This skill is recommended for this task.",
    "suggest": "SUGGESTION - Consider activating this skill for better results."
  }
}
